{% extends "admin/base.html" %}

{% block title %}Dashboard - Cellar Society Admin{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Dashboard Overview</h2>
    <p>Welcome back, {{ session.admin_username }}! Here's your system summary.</p>
</div>

<!-- Statistics Cards -->
<div class="stats-grid">
    <div class="stat-card">
        <h4>Total Products</h4>
        <div class="number">{{ stats.total_products }}</div>
        <p style="opacity: 0.8; font-size: 14px;">Wine inventory</p>
    </div>

    <div class="stat-card accent">
        <h4>Total Customers</h4>
        <div class="number">{{ stats.total_customers }}</div>
        <p style="opacity: 0.8; font-size: 14px;">Registered users</p>
    </div>

    <div class="stat-card">
        <h4>Total Orders</h4>
        <div class="number">{{ stats.total_orders }}</div>
        <p style="opacity: 0.8; font-size: 14px;">All time orders</p>
    </div>

    <div class="stat-card accent">
        <h4>Pending Orders</h4>
        <div class="number">{{ stats.pending_orders }}</div>
        <p style="opacity: 0.8; font-size: 14px;">Awaiting processing</p>
    </div>
</div>

<!-- Quick Actions -->
<div class="card">
    <h3>Quick Actions</h3>
    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
        <a href="{{ url_for('add_product') }}" class="btn primary">+ Add New Wine</a>
        <a href="{{ url_for('products') }}" class="btn ghost">View All Products</a>
        <a href="{{ url_for('orders') }}" class="btn accent">View Orders</a>
        <a href="{{ url_for('customers') }}" class="btn ghost">View Customers</a>
    </div>
</div>

<!-- Recent Orders -->
<div class="card">
    <h3>Recent Orders</h3>
    {% if recent_orders %}
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Order ID</th>
                    <th>Customer</th>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Total</th>
                    <th>Status</th>
                    <th>Date</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for order in recent_orders %}
                <tr>
                    <td><strong>#{{ order.id }}</strong></td>
                    <td>{{ order.customer_name }}</td>
                    <td>{{ order.product_name }}</td>
                    <td>{{ order.quantity }}</td>
                    <td>â‚±{{ "%.2f"|format(order.total_price) }}</td>
                    <td>
                        {% if order.status == 'Pending' %}
                            <span class="badge warning">{{ order.status }}</span>
                        {% elif order.status == 'Processing' %}
                            <span class="badge primary">{{ order.status }}</span>
                        {% elif order.status == 'Delivered' %}
                            <span class="badge success">{{ order.status }}</span>
                        {% else %}
                            <span class="badge">{{ order.status }}</span>
                        {% endif %}
                    </td>
                    <td>{{ order.order_date[:10] }}</td>
                    <td>
                        <a href="{{ url_for('order_detail', order_id=order.id) }}" class="btn btn-small ghost">View</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="empty-state">
        <h3>No Orders Yet</h3>
        <p>Orders from customers will appear here.</p>
    </div>
    {% endif %}
</div>

<!-- System Information -->
<div class="card">
    <h3>System Information</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
        <div>
            <p style="color: var(--muted); font-size: 14px; margin-bottom: 4px;">Database</p>
            <p style="font-weight: 600; color: var(--primary);">SQLite (cellar_society.db)</p>
        </div>
        <div>
            <p style="color: var(--muted); font-size: 14px; margin-bottom: 4px;">Backend Framework</p>
            <p style="font-weight: 600; color: var(--primary);">Flask (Python)</p>
        </div>
        <div>
            <p style="color: var(--muted); font-size: 14px; margin-bottom: 4px;">Data Structures</p>
            <p style="font-weight: 600; color: var(--primary);">Hash Table, BST, Queue, Stack</p>
        </div>
        <div>
            <p style="color: var(--muted); font-size: 14px; margin-bottom: 4px;">Admin User</p>
            <p style="font-weight: 600; color: var(--primary);">{{ session.admin_username }}</p>
        </div>
    </div>
</div>
{% endblock %}